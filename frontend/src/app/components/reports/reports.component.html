<div class="container-fluid p-4">

  <div class="card mb-4 shadow-sm">
    <div class="card-body">
      <div class="d-flex justify-content-between align-items-center">
        <h1 class="mb-0">
          <i class="bi bi-file-earmark-bar-graph"></i> Report Generator
        </h1>
        <button class="btn btn-primary btn-lg" (click)="openModal()">
          <i class="bi bi-plus-circle"></i> Generate New Report
        </button>
      </div>
    </div>
  </div>

  <div class="row g-3 mb-4">
    <div class="col-md">
      <div class="card text-center h-100">
        <div class="card-body">
          <h6 class="card-subtitle mb-2 text-muted">Total Reports</h6>
          <h2 class="card-title mb-0">{{ totalCount() }}</h2>
        </div>
      </div>
    </div>
    <div class="col-md">
      <div class="card text-center h-100 border-warning">
        <div class="card-body">
          <h6 class="card-subtitle mb-2 text-warning">Pending</h6>
          <h2 class="card-title mb-0 text-warning">{{ pendingCount() }}</h2>
        </div>
      </div>
    </div>
    <div class="col-md">
      <div class="card text-center h-100 border-info">
        <div class="card-body">
          <h6 class="card-subtitle mb-2 text-info">Processing</h6>
          <h2 class="card-title mb-0 text-info">{{ processingCount() }}</h2>
        </div>
      </div>
    </div>
    <div class="col-md">
      <div class="card text-center h-100 border-success">
        <div class="card-body">
          <h6 class="card-subtitle mb-2 text-success">Completed</h6>
          <h2 class="card-title mb-0 text-success">{{ completedCount() }}</h2>
        </div>
      </div>
    </div>
    <div class="col-md">
      <div class="card text-center h-100 border-danger">
        <div class="card-body">
          <h6 class="card-subtitle mb-2 text-danger">Failed</h6>
          <h2 class="card-title mb-0 text-danger">{{ failedCount() }}</h2>
        </div>
      </div>
    </div>
  </div>

  @if (isLoading()) {
    <div class="alert alert-info text-center" role="alert">
      <div class="spinner-border text-primary me-2" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <span>Loading reports...</span>
    </div>
  }

  @if (errorMessage()) {
    <div class="alert alert-danger" role="alert">
      <i class="bi bi-exclamation-triangle-fill"></i> {{ errorMessage() }}
    </div>
  }

  <div class="card shadow-sm">
    <div class="card-body p-0">
      <div class="grid-container ag-theme-quartz">
        <ag-grid-angular
          [theme]="theme"
          [rowData]="reports()"
          [columnDefs]="columnDefs"
          [defaultColDef]="defaultColDef"
          [rowHeight]="rowHeight"
          [headerHeight]="headerHeight"
          [animateRows]="animateRows"
        />
      </div>
    </div>
  </div>
</div>

